<!DOCTYPE HTML>
<html>
<head>
    	<meta charset='utf-8' />
    	<title>My Routes</title>
	<link rel="stylesheet" type="text/css" href="roam.css">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.11.4/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.11.4/mapbox-gl.css' rel='stylesheet' />
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>

</head>

<body>
	<div id="topbar">
	<br>
	<center>
	<h1>OPEN<b>ACCESS</b>MAPS</h1>
	</center>
	</div>
    	<center>
    	<p>A collaborative mapping platform for wheelchair users</p>
    	</center>
    	<div id='twomaps'>
    	<br>
    	<div id='buttons'>
    	<a href="http://www.ericajewell.com/openaccessmap/index.html"><button class ="btn"> Public Routes</button></a>
    	<a href="http://www.ericajewell.com/openaccessmap/myroutes.html"><button class="readybtn"> My Routes</button></a>
    	</div>
    	<div id='addbutton'>
    	<button class="addbtn" onclick="saveRoute()"> Add to Public Routes</button>
    	</div>  
    	<br>
    	<br>
    	<br>
	<div id='mapdiv'></div> 	
	<br>
	<br>
	<center>
	</div>	
	</center>
</body>
<script>

/*
// TODO/WIP: create arrays to store gpx coordinates
var lons[];
var lats[];

 $.ajax({
               url: "http://www.ericajewell.com/openaccessmap/newcross2hackcess.gpx",
               success: function (xml) {
                    	$(xml).find("trkpt").each(function () {
                    	 var lon = $(this).attr("lon");
                    	 lons.push(lon);
                         var lat = $(this).attr("lat");
                         lats.push(lat);
                         //$("#gpx").append(lon, lat);
                    });
               }
          });


*/

mapboxgl.accessToken = 'pk.eyJ1IjoiamV3ZWxsZSIsImEiOiJjaWg5ZXpuYTAwMDRsdjBranp1ZzN2YzNuIn0.C3fADSX9QbPApjiJyRyJLQ';
var map = new mapboxgl.Map({
    container: 'mapdiv',
    style: 'mapbox://styles/mapbox/streets-v8',
    center: [-0.0374, 51.4739],
    zoom: 15
});



map.on('style.load', function () {

    // ROUTE A: NEW CROSS to HACKCESS
    // 1/2. Define the route
    map.addSource("routeA", {
        "type": "geojson",
        "data": {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "type": "LineString",             
                "coordinates": [
                    [-0.040104, 51.474939],
                    [-0.038956, 51.475246],
                    [-0.038012, 51.473803]
                ]
            }
        }
    });
    
    // 2/2. Draw the layer
    map.addLayer({
        "id": "routeA",
        "type": "line",
        "source": "routeA",
        "layout": {
            "line-join": "round",
            "line-cap": "round"
        },
        "paint": {
            "line-color": "#CD4F39",
            "line-width": 8
        }
    });
    
    
    
    // ROUTE B: GOLDSMITHS TO SAINSBURYS
	// 1/2. Define the route
    map.addSource("routeB", {
        "type": "geojson",
        "data": {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [-0.037676, 51.473096],
                    [-0.034994, 51.474529]			
                ]
            }
        }
    });
	// 2/2. Draw the layer
    map.addLayer({
        "id": "routeB",
        "type": "line",
        "source": "routeB",
        "layout": {
            "line-join": "round",
            "line-cap": "round"
        },
        "paint": {
            "line-color": "#CD4F39",
            "line-width": 8
        }
    });

    
});

/*
// reading through gpx array to create map
                for (i = 0; i < lons.length; i++;){
                	for (j = 0; j < lats.length; j++;){
			[lons[i], lats[j]];
                	}
                }

// write gpx file to public maps          
function saveRoute(){
}

// load coordinates on page for testing
$("#gpx").load("http://www.ericajewell.com/openaccessmap/newcross2hackcess.gpx");
*/

</script>
</html>
